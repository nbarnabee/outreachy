(()=>{const e={wikidata_qid:{description:"Wikidata item ID",input:["text"],inputDescription:["item ID"],multiple:!1,pattern:["^Qd+$"]},for_wikis:{description:"A string or array of strings describing the wiki(s) this tool can be used on.  Use hostnames such as <code>zh.wiktionary.org</code>.  Use asterisks as wildcards.  For example, <code>*.wikisource.org</code> means 'this tool works on all Wikisource wikis.'  <code>*</code> means 'this works on all wikis, including Wikimedia wikis.'",input:["text"],multiple:!0,pattern:["^(*|(.*)?.?(mediawiki|wiktionary|wiki(pedia|quote|books|source|news|versity|data|voyage|media)).org)$"]},icon:{description:"A link to a Wikimedia Commons file description page for an icon that depicts the tool.",input:["url"],multiple:!1,pattern:["^https://commons.wikimedia.org/wiki/File:.+..+$"]},available_ui_languages:{description:"The language(s) the tool's interface has been translated into.  Use <a href='https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes' target='_blank'>ISO 639-1 language codes</a> like <code>zh</code> and <code>scn</code>.",input:["text"],multiple:!0,pattern:["^(x-.*|[A-Za-z]{2,3}(-.*)?)$"]},tool_type:{description:"The manner in which the tool is used.  Select one of the available options.",input:["select"],multiple:!1,pattern:[null],options:["web app","desktop app","bot","gadget","user script","command line tool","coding framework","lua module","template","other"]},repository:{description:"A link to the repository where the tool code is hosted.",input:["url"],multiple:!1,pattern:[null]},api_url:{description:"A link to the tool's API, if available.",input:["url"],multiple:!1,pattern:[null]},developer_docs_url:{description:"A link to the tool's developer documentation, and an <a href='https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes' target='_blank'>ISO 639-1 language code</a> that indicates the documentation's language.  (If no value is given, this value will default to <code>en</code>.)",input:["url","text"],multiple:!1,pattern:[null,"^(x-.*|[A-Za-z]{2,3}(-.*)?)$"]},user_docs_url:{description:"A link to the tool's user documentation, and an <a href='https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes' target='_blank'>ISO 639-1 language code</a> that indicates the documentation's language.  (If no value is given, this value will default to <code>en</code>.)",input:["url","text"],multiple:!1,pattern:[null,"^(x-.*|[A-Za-z]{2,3}(-.*)?)$"]},feedback_url:{description:"A link to a location where the tool's user can leave feedback, and an <a href='https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes' target='_blank'>ISO 639-1 language code</a> that indicates the expected language.  (If no value is given, this value will default to <code>en</code>.)",input:["url","text"],multiple:!1,pattern:[null,"^(x-.*|[A-Za-z]{2,3}(-.*)?)$"]},privacy_policy_url:{description:"A link to the tool's privacy policy, and an <a href='https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes' target='_blank'>ISO 639-1 language code</a> that indicates the policy's language.  (If no value is given, this value will default to <code>en</code>.)",input:["url","text"],multiple:!1,pattern:[null,"^(x-.*|[A-Za-z]{2,3}(-.*)?)$"]},translate_url:{description:"A link to the tool's translation interface.",input:["url"],multiple:!1,pattern:[null]},bugtracker_url:{description:"A link to the tool's bug tracker on GitHub, Bitbucket, Phabricator, etc.",input:["url"],multiple:!1,pattern:[null]}},t=[{title:"Pywikibot",name:"pywikibot",description:"Python library and collection of scripts that automate work on MediaWiki sites",toolhub:"https://toolhub.wikimedia.org/tools/pywikibot",url:"https://www.mediawiki.org/wiki/Special:MyLanguage/Manual:Pywikibot",repository:"https://gerrit.wikimedia.org/g/pywikibot/core",missing:["wikidata_qid","api_url","feedback_url","privacy_policy_url"]},{title:"Wikidata Todo",name:"mm_wikidata_todo",toolhub:"https://toolhub.wikimedia.org/tools/mm_wikidata_todo",description:"Shows you little things you can do on Wikidata.",url:"http://tools.wmflabs.org/wikidata-todo",repository:"https://bitbucket.org/magnusmanske/wikidata-todo",missing:["wikidata_qid","for_wikis","icon","api_url","user_docs_url","feedback_url","privacy_policy_url","translate_url"]},{title:"A totally fake tool",name:"totally_fake",description:"I just made this one up to test some things.",toolhub:"https://toolhub.wikimedia.org/tools/mm_wikidata_todo",url:"http://www.google.com",missing:["tool_type","available_ui_languages","for_wikis"]}];function i(e,t){const i=document.createElement("select");return i.setAttribute("name",t),e.forEach((e=>{let t=document.createElement("option");t.value=[e],t.innerText=[e],i.appendChild(t)})),i}function n(e,t,i,n){const o=document.createElement("button");return o.setAttribute("type","button"),o.innerText=e,o.addEventListener("click",t),i&&i.forEach((e=>o.classList.add(e))),n&&(o.value=n),o}function o(){document.body.classList.add("modal-open")}document.getElementById("show-search-bar").addEventListener("click",(function(){document.querySelector(".search-bar-container").style.display="flex",document.querySelector(".start-button-container").style.display="none";const e=n("< Back",(()=>location.reload()),["remove-on-get-task"]);document.getElementById("start-search-wrapper").appendChild(e)})),document.getElementById("surprise-button").addEventListener("click",(()=>{document.querySelector(".task-wrapper").hidden=!1,document.querySelector(".start-button-container").style.display="none",function(){let e=Math.floor(Math.random()*t.length),i=t[e],n=Math.floor(Math.random()*i.missing.length),o=i.missing[n];h(i,o),p(i,o)}()})),document.querySelector(".close-modal").addEventListener("click",(function(){location.reload()})),document.getElementById("get-new-task").addEventListener("click",(function(){location.reload()}));const a=document.getElementById("search-bar"),l=document.getElementById("suggestions-list");function r(e,t,i){let n=document.createElement(e);n.innerText=t;for(let e in i)n.setAttribute(e,i[e]);return n}function s(){l.classList.remove("has-suggestions");let e=a.value;for(let i of t)if(i.title===e)return u(),d(i),void(a.value="");document.querySelector(".no-results").hidden=!1,a.value=""}function d(e){const t=document.querySelector(".search-result-wrapper"),o=document.getElementById("search-result");document.querySelector(".remove-on-search")&&document.querySelector(".remove-on-search").remove(),o.innerHTML="";const a=document.createElement("p");if(0===e.missing.length)a.innerText=`${e.title} isn't missing any values.  How wonderful!  You'll have to find another tool to work on.`;else{a.innerText=`${e.title} is missing the following values.  Which one would you like to find?`,a.appendChild(i(e.missing,"task"));const o=n("Get Task",c,["remove-on-search"],e.name);t.appendChild(o)}o.appendChild(a)}function c(e){const i=Array.from(document.getElementsByTagName("select"))[0].value;let n;t.forEach((t=>{t.name!==e.target.value||(n=t)})),u(),document.querySelector(".remove-on-get-task")&&document.querySelector(".remove-on-get-task").remove(),p(n,i),h(n,i)}function u(){document.getElementById("task-form").innerHTML="",document.querySelector(".task-wrapper").hidden=!0,Array.from(document.querySelectorAll(".disposable")).forEach((e=>e.remove())),document.getElementById("repository-link").hidden=!0,document.getElementById("wikidata-link").hidden=!0,document.getElementById("wikimedia-link").hidden=!0,document.getElementById("info-missing").checked=!1}function p(t,i){document.querySelector(".task-wrapper").hidden=!1;let a=document.getElementById("task-form");a.appendChild(function(e,t){let i=document.createElement("h3");return i.innerText=`${e.title} is missing its ${t}.`,i}(t,i)),m(i).forEach((e=>a.appendChild(e))),a.appendChild(function(t){const i=document.createElement("p");return i.innerHTML=`<b>${t}</b>: ${e[t].description}`,i.style.maxWidth="66ch",i}(i)),a.appendChild(function(t){let i=document.createElement("div");if(i.classList.add("row"),i.classList.add("row-gap"),!0===e[t].multiple){const e=n("Add another value",(function(){const e=m(t)[0];let i=Array.from(document.getElementsByName([t]));i[i.length-1].insertAdjacentElement("afterend",e)}));i.appendChild(e)}let a=n("Submit",o);return i.appendChild(a),i}(i))}function m(t){const n=[];return e[t].options?n.push(i(e[t].options,t)):e[t].input.forEach(((e,i)=>{const o=document.createElement("input");o.type=[e],o.setAttribute("name",t),o.placeholder=1===i?"ISO 639-1 language code (defaults to 'en')":"available_ui_languages"===t?"ISO 639-1 language code":t,n.push(o)})),n}function h(e,t){Array.from(document.querySelectorAll(".tool-name")).forEach((t=>t.innerText=e.title));const i=g(e,"toolhub");document.getElementById("toolhub-link").appendChild(i);const n=g(e,"url");if(document.getElementById("url-link").appendChild(n),e.repository){const t=g(e,"repository");document.getElementById("repository-link").appendChild(t),document.getElementById("repository-link").hidden=!1}"wikidata_qid"===t&&(document.getElementById("wikidata-link").hidden=!1),"icon"===t&&(document.getElementById("wikimedia-link").hidden=!1)}function g(e,t){let i=document.createElement("a");return i.setAttribute("href",e[t]),i.setAttribute("target","_blank"),i.classList.add("disposable"),i.style.color="var(--blue)",i.style.textDecoration="underline",i.innerText=e[t],i}a.addEventListener("keyup",(function(e){if(13===e.keyCode)return void s();document.querySelector(".no-results").hidden=!0;const i=e.currentTarget.value;let n=[];i.length>0&&(n=function(e){let i=[];const n=e.toLowerCase();for(let e=0;e<t.length;e++)t[e].title.toLowerCase().indexOf(n)>-1&&i.push(t[e]);return i}(i)),function(e){l.innerHTML="",e.length>0?(e.forEach((e=>{let t=r("li",e.title,{"data-value":e.title}),i=r("span",e.description,{"data-value":e.title});l.appendChild(t),t.appendChild(i)})),l.classList.add("has-suggestions")):(e=[],l.innerHTML="",l.classList.remove("has-suggestions"))}(n)})),l.addEventListener("click",(function(e){a.value=e.target.dataset.value,a.focus(),l.innerHTML="",l.classList.remove("has-suggestions")})),document.getElementById("search-bar-button").addEventListener("click",s)})();